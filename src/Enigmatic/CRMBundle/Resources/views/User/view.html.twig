{% extends app.request.isXmlHttpRequest()?"AppBundle::empty.html.twig":'EnigmaticCRMBundle::layout.html.twig' %}

{% block title %}{% trans %}enigmatic.crm.header.titles.user_view{% endtrans %} - {{ user.getFirstname() }} {{ user.getName() }} - {{ parent() }}{% endblock %}
{% block nav_active %}user{% endblock %}

{% block content %}

    {% import "AppBundle:macro:button.html.twig" as button %}

    <div class="action action_left">
        {{ button.create('back', 'Back'|trans, path('enigmatic_crm_user_list'), null, 'speednav') }}
    </div>

    <div class="action action_right">
        {{ button.create('update', 'Update'|trans, path('enigmatic_crm_user_update', {'user': user.getId()}), null, 'speednav') }}
    </div>

    <h1>{{ user.getFirstname() }} {{ user.getName() }}</h1>

    <section class="details">

        <h2>{% trans %}enigmatic.crm.user.view.titles.details{% endtrans %}</h2>

        {% trans %}enigmatic.crm.user.field.name.name{% endtrans %} : {{ user.getFirstname() }} {{ user.getName() }} <br/>
        {% trans %}enigmatic.crm.user.field.email.name{% endtrans %} : {{ user.getEmail() }} <br/>
        {% trans %}enigmatic.crm.user.field.role.name{% endtrans %} :
        {% if user.hasRole('ROLE_ADMIN') %}
            {% trans %}enigmatic.crm.user.field.role.admin{% endtrans %}
        {% elseif user.hasRole('ROLE_RS') %}
            {% trans %}enigmatic.crm.user.field.role.rs{% endtrans %}
        {% elseif user.hasRole('ROLE_RCA') %}
            {% trans %}enigmatic.crm.user.field.role.rca{% endtrans %}
        {% elseif user.hasRole('ROLE_CA') %}
            {% trans %}enigmatic.crm.user.field.role.ca{% endtrans %}
        {% else %}
            {% trans %}enigmatic.crm.user.field.role.empty{% endtrans %}
        {% endif %} <br/>
        {% trans %}enigmatic.crm.user.field.locked.name{% endtrans %} : {{ ('enigmatic.crm.user.field.locked.'~(user.isLocked()?0:1)) | trans }}

    </section>

    <section>

        <h2>{% trans %}enigmatic.crm.user.view.titles.agencies{% endtrans %}</h2>

        {% trans %}enigmatic.crm.user.field.agencies.name{% endtrans %} : {% if user.getAgency() %}{{ user.getAgency().getName() }}{% endif %}

    </section>

{% endblock %}
